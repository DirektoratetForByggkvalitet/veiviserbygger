@use '@/styles/helpers.scss' as *;

.editor {
    $this: &;
    @include font-size(base);
    display: grid;
    width: 100%;
    border: $border-style;
    background-color: $color-light;

    &:hover {
        border-color: shade(color(neutral), 6%);

        #{$this}__label {
            color: shade($color-muted, 20%);
        }
    }

    &__button-label {
        @include font-size(small);
        color: $color-muted;
        width: 100%;
        border: $border-style;
        padding: $form-padding-y $form-padding-x;
        background-color: $color-light;
        text-align: left;
        cursor: text;
        &:hover {
            border-color: shade(color(neutral), 6%);
            color: shade($color-muted, 20%);
        }
    }

    &__label {
        @include font-size(small);
        font-weight: normal;
        color: $color-muted;
        padding: $form-padding-y $form-padding-x 0;
    }

    &__input {
        border-radius: 0;
        padding: 8px $form-padding-x $form-padding-y;
        background-color: transparent;

        @include input-placeholder {
            color: $color-muted;
        }

        &--empty:not(:focus-within) {
            // TODO: Improve empty styling
        }
    }

    &__menu {
        display: flex;
        height: 54px;
        max-height: 54px;
        padding: 0;
        border-bottom: $border-style;
        display: none;
        z-index: $level-1;
    }

    &__control {
        @include font-size(small);
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 0 $form-padding-x;
        min-width: 54px;

        &--active {
            background-color: color(neutral);
        }
    }

    &__separator {
        border: 0;
        margin: 0 4px;
        padding: 0;
        border-right: $border-style;
    }

    &:focus-within {
        border-radius: 2px;
        border-color: color(primary);
        box-shadow: 0 0 0 1px color(primary);

        #{$this}__label {
            color: $color-text;
            border-bottom: $border-style;
            padding-bottom: $form-padding-y;
        }

        #{$this}__menu {
            display: flex;
            animation: menuFadeIn 200ms $ease-out-quart both;
        }
    }

    :global(.tiptap) {
        outline: 0;

        :first-child {
            margin-top: 0;
        }

        ul,
        ol {
            list-style: circle;
            padding: 0 0 0 1.1rem;
            margin: 1rem 0;

            li p {
                margin: 0;
            }
        }

        ul li {
            list-style: disc;
            padding-left: 0.3rem;
        }

        ol {
            padding-left: 2rem;

            li {
                list-style: decimal;
                padding-left: 0;
            }
        }

        h1,
        h2,
        h3,
        p {
            text-wrap: pretty;

            &:not(:last-child) {
                margin-bottom: 1rem;
            }
        }

        h1 {
            @include font-size(title);
        }

        h2 {
            @include font-size(sub-title);
        }

        h3 {
            @include font-size(heading);
        }
    }
}

@keyframes menuFadeIn {
    from {
        opacity: 0;
        max-height: 0;
        overflow: hidden;
    }
}
