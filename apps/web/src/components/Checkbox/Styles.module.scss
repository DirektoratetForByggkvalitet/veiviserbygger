@use '@/styles/1_settings/mixins';
@use '@/styles/1_settings/colors';
@use '@/styles/1_settings/vars';

.checkbox {
    $this: &;
    $size: 30px;
    $icon-strok-length: 22.627416610717773;
    display: flex;
    align-items: center;
    width: 100%;
    cursor: pointer;
    &:not(:last-child) {
        margin-bottom: vars.$spacing--small;
    }
    @include mixins.no-select;

    &__label {
        @include mixins.font(base, normal);
        @include mixins.font-size(small);
        margin-top: 3px;
        flex-grow: 2;
    }

    &__indicator {
        display: flex;
        align-items: center;
        justify-content: center;
        flex-shrink: 0;
        width: $size;
        height: $size;
        margin-right: 10px;
        border-radius: 0;
        border: vars.$border-style;
        background-color: colors.$light;
    }

    &__icon {
        margin-left: 1px;

        path {
            stroke-dasharray: $icon-strok-length;
            stroke-dashoffset: -$icon-strok-length;
            transition: stroke-dashoffset 100ms vars.$ease-in-out-quint--custom;
        }
    }

    &__input {
        position: absolute;
        opacity: 0;

        &:checked + #{$this}__indicator {
            path {
                stroke-dashoffset: 0;
                transition: stroke-dashoffset 100ms vars.$ease-out-quart;
            }
        }

        &:focus:focus-visible ~ #{$this}__indicator {
            box-shadow: 0 0 0 1px black;
        }
    }

    &--disabled {
        #{$this}__indicator {
            background-color: colors.get(neutral, xlight);
            border-color: colors.get(neutral, xlight);
        }
        #{$this}__label {
            color: colors.$muted;
        }
    }

    &--large {
        border: vars.$border-style;
        padding: vars.$spacing--small;
        margin-bottom: 0;
        #{$this}__label {
            @include mixins.font-size(base);
        }
    }

    &--toggle {
        $padding: 4px;
        $size: 30px;
        $width: $size * 1.8;

        #{$this}__icon {
            position: relative;
            margin-top: 1px;
            opacity: 1;
            left: 0;
            transform: none;

            transition:
                transform 300ms vars.$ease-in-out-quint--custom,
                opacity 500ms vars.$ease-in-out-quint--custom;
        }

        #{$this}__indicator {
            position: relative;
            width: $width + ($padding * 2);
            height: $size + ($padding * 2);
            color: colors.$text;
            border-radius: $size * 2;
            padding: 0;
            border-color: colors.get(neutral, base);
            background-color: colors.$light;
            transition: background-color 200ms vars.$ease-in-out-quint--custom;

            &:before {
                content: '';
                position: absolute;
                top: $padding;
                left: $padding;
                height: $size - (vars.$border-width * 2);
                width: $size - (vars.$border-width * 2);
                border-radius: 50%;
                background-color: colors.get(neutral, dark);

                transition:
                    transform 300ms vars.$ease-in-out-quint--custom,
                    background-color 200ms vars.$ease-in-out-quint--custom;
            }
        }

        #{$this}__input:checked {
            & + #{$this}__indicator {
                background-color: colors.get(primary, dark);

                &:before {
                    opacity: 1;
                    transform: translateX(calc($width - $size));
                    background-color: colors.$light;
                }
            }

            & + #{$this}__indicator #{$this}__icon {
                opacity: 1;
                color: colors.get(primary, dark);
                transform: translateX($size * 0.5 - 3px);
            }
        }
    }

    &--read-only {
        cursor: default;
    }
}
